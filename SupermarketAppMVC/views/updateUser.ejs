<%- include('partials/header', { pageTitle: 'Edit User', user, currentPage: 'adminUsers', messages, errors }) %>
<section class="admin-form-wrapper">
  <div class="admin-panel">
    <div class="auth-header">
      <h1 class="auth-title">Edit User</h1>
      <p class="auth-sub">Update account information</p>
    </div>
    <% if (messages && messages.length) { %>
      <div class="alert alert-success mb-3"><%= messages.join(', ') %></div>
    <% } %>
    <% if (errors && errors.length) { %>
      <div class="alert alert-danger mb-3"><%= errors.join(', ') %></div>
    <% } %>
    <form action="/admin/users/<%= editUser.id %>/edit" method="POST" class="admin-form" novalidate>
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="username" name="username" placeholder="Username" required value="<%= editUser.username %>">
        <label for="username">Username</label>
      </div>
      <div class="form-floating mb-3">
        <input type="email" class="form-control" id="email" name="email" placeholder="Email" required value="<%= editUser.email %>">
        <label for="email">Email</label>
      </div>
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="address" name="address" placeholder="Address" value="<%= editUser.address || '' %>">
        <label for="address">Address</label>
      </div>
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="contact" name="contact" placeholder="Contact" value="<%= editUser.contact || '' %>">
        <label for="contact">Contact</label>
      </div>
      <div class="form-floating mb-3">
        <input type="password" class="form-control" id="new_password" name="new_password" placeholder="New Password (leave blank to keep current)">
        <label for="new_password">New Password (optional)</label>
      </div>
      <div class="mb-3">
        <label for="role" class="form-label">Role</label>
        <select id="role" name="role" class="form-select">
          <option value="user" <%= editUser.role === 'user' ? 'selected' : '' %>>User</option>
          <option value="admin" <%= editUser.role === 'admin' ? 'selected' : '' %>>Admin</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary w-100">Save Changes</button>
    </form>
    <form action="/admin/users/<%= editUser.id %>/delete" method="POST" class="mt-3" onsubmit="return confirm('Delete this user?');">
      <button type="submit" class="btn btn-delete w-100">Delete User</button>
    </form>
  </div>
</section>
<%- include('partials/footer') %>
